<div class="main-content">
<h1>タスク一覧</h1>

<table>
  <thead>
    <tr>
      <th></th>
      <th>タイトル</th>
      <th>期日</th>
      <th>重要度</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr  class="task">
        <div>
          <% if task.completion_flag == true %>
          <td class="completion done" >完　了</td>
          <% else %>
          <td class="completion">未完了</td>
          <% end %>
          <td><%= task.title %></td>
          <td><%= l task.time_limit %></td>
          <td>
            <% if task.importance == "高" %>
              <span class="font high">
            <% elsif task.importance == "中" %>
              <span class="font normal">
            <% else %>
              <span class="font low">
            <% end %>
            <%= task.importance %>
            </span>
          </td>
          <td><%= button_to '詳細', task, method: :get, class: "btn mini-btn" %></td>
          <% if ( current_user.id == task.user_id )  || ( current_user.admin == true )  %>
            <td><%= button_to '編集', edit_task_path(task), method: :get, class: "btn mini-btn" %></td>
            <td><%= button_to '削除', task, method: :delete, data: { confirm: '削除してもよろしいですか?' }, class: "btn mini-btn" %></td>
          <% end %>
        </div>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= button_to "タスクを登録する", {controller: "tasks", action: "new"}, {method: :get, class:"btn sign-btn " } %>
</div>
